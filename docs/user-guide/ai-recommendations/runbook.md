# Runbooks

AI automatically generates a runbook corresponding to the recommendation actions identified. Since you always have the choice to approve or reject the suggested runbook. Moreover, the user always  option to manually [create additional runbooks](#create-a-runbook).

:::info Example of Remediation Action
When AI recommends a cost optimization such as reducing memory allocation, the linked runbook carries out that change. For example, scaling down a pod’s memory limit from 6 Gi to 3 Gi across selected clusters.
:::


---

<!-- Runbook can apply on one or more clusters. If there are 20 clusters added to Devtron, you can view them Approval Status tab. 

Time bound, indefinite

Who created/ai created  is all captured in auditing. Changes made to existing runbook captured with necessary timestamp -->

## Approval Types

### Approve Options

| Option      | Behavior                 | Example Use Case    |
| ----------- | ------------------------ | ------------------- |
| **Forever**          | All future runs of this runbook stands indefinitely auto-approved.  | For dev or sandbox clusters where downtime or failed runs are acceptable and you want continuous savings.        |
| **Till date & time** | Auto-approves until a specific expiry date and time. | During a maintenance window or before a critical demo, so changes are applied automatically until that period ends. |
| **For duration**     | Auto-approves temporarily for a set number of hours. | For short tests or limited-time fixes, such as approving remediation for the next few hours.   |


### Reject Options
| Option      | Behavior                 | Example Use Case     |
| ------------ | ----------------------- | -------------------- |
| **Forever**          | Blocks all future runs of this runbook permanently. | For production clusters where any automated remediation is risky or unwanted.   |
| **Till date & time** | Rejects runs until a specific expiry date and time. | When you want the cluster to stay stable (e.g., during a product demo or release).  |
| **For duration**     | Rejects runs temporarily for a few hours.           | To pause remediation during high-traffic periods or while verifying manual changes.  |

:::note What happends when the approval or rejection period expires?
When any approval or rejection period ends, the runbook status resets to **Action Pending**. The user is expected to take an action again.
:::

---

## Editing a Runbook Spec

Select **Edit Spec** to modify the YAML definition.

```yaml
apiVersion: devtron.ai/v1
kind: Runbook
metadata:
  name: update-resource-limits
  description: Update CPU/memory limits for workloads.
spec:
  steps:
    - name: patch-resource-limits
      type: kubectl-patch
      params:
        cluster: "{{ .cluster }}"
        namespace: "{{ .namespace }}"
        resourceType: Deployment
        resourceName: "{{ .resourceName }}"
        patch:
          spec:
            template:
              spec:
                containers:
                  - name: "{{ .containerName }}"
                    resources:
                      requests:
                        cpu: "{{ .cpuRequest }}"
                        memory: "{{ .memoryRequest }}"
                      limits:
                        cpu: "{{ .cpuLimit }}"
                        memory: "{{ .memoryLimit }}"
```

---

## Audit Logs

Every Runbook logs:

* Created / Updated / Approved / Rejected actions  
* User, timestamp, and resource  
* Full JSON payload for traceability

---

## Extras

### Create a Runbook

:::info 
Follow this section only if you wish to create a runbook different than the one generated by AI.
:::

1. From the left navigation, go to **AI Recommendations** → **Runbooks**.

2. Click **Create Runbook**.

3. Enter the name and description for your runbook:
  * **Name** - update-resource-limits
  * **Description** - Updates CPU and memory limits for workloads.

4. Click **Create Runbook**. 

